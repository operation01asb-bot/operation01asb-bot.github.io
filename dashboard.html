<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="sidebar">
    <h3>Onboarding Portal</h3>
    <ul>
        <li><a href="dashboard.html">Welcome</a></li>
        <li><a href="checklist.html">Checklist</a></li>
        <li><a href="resources.html">Resources</a></li>
        <li><a href="progress.html">Progress</a></li>
        <li id="adminOnly" style="display:none;"><a href="admin.html">Admin Panel</a></li>
        <li><a href="#" onclick="logout()">Logout</a></li>
    </ul>
</div>

<div class="content-area">
    <h1>Welcome to the Team ðŸŽ‰</h1>
    <p>Your onboarding journey starts now.</p>

    <div class="card-grid">
        <div class="card">
            <h3>Complete Checklist</h3>
            <p>Start Week 1 onboarding tasks.</p>
            <a href="checklist.html" class="card-btn">Open</a>
        </div>

        <div class="card">
            <h3>Company Resources</h3>
            <p>Policies, forms, manuals.</p>
            <a href="resources.html" class="card-btn">Open</a>
        </div>

        <div class="card">
            <h3>View Progress</h3>
            <p>Check your onboarding completion.</p>
            <a href="progress.html" class="card-btn">Open</a>
        </div>
    </div>
</div>

<script type="module">
import { auth, db } from "./firebase.js";
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

onAuthStateChanged(auth, async (user) => {
    if (!user) window.location.href = "index.html";

    const snap = await getDoc(doc(db, "users", user.uid));
    const role = snap.data().role;

    if (role === "admin") {
        document.getElementById("adminOnly").style.display = "block";
    }
});

window.logout = function () {
    signOut(auth);
};
</script>

</body>
</html>
